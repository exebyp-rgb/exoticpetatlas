---
import '../styles/global.css';

interface Props {
  title: string;
  description?: string;
  keywords?: string;
  ogImage?: string;
  ogType?: string;
  canonical?: string;
  noindex?: boolean;
}

const { 
  title, 
  description = "Exotic Pet Atlas - Your comprehensive guide to exotic pets, laws, vets, breeders, and care setups.",
  keywords = "exotic pets, pet care, exotic animals, pet laws, exotic vets, pet breeders, animal care",
  ogImage = "/og-image.jpg",
  ogType = "website",
  canonical,
  noindex = false
} = Astro.props;

const canonicalURL = canonical || new URL(Astro.url.pathname, Astro.site).href;
const fullTitle = `${title} | Exotic Pet Atlas`;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- Primary Meta Tags -->
    <title>{fullTitle}</title>
    <meta name="title" content={fullTitle} />
    <meta name="description" content={description} />
    <meta name="keywords" content={keywords} />
    {noindex && <meta name="robots" content="noindex, nofollow" />}
    {!noindex && <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />}
    
    <!-- Canonical URL -->
    <link rel="canonical" href={canonicalURL} />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content={ogType} />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:title" content={fullTitle} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={new URL(ogImage, Astro.site).href} />
    <meta property="og:site_name" content="Exotic Pet Atlas" />
    <meta property="og:locale" content="en_US" />
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content={canonicalURL} />
    <meta name="twitter:title" content={fullTitle} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={new URL(ogImage, Astro.site).href} />
    
    <!-- Additional SEO -->
    <meta name="author" content="Exotic Pet Atlas" />
    <meta name="theme-color" content="#B8E6C9" />
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    
    <!-- Preload critical assets -->
    <link rel="preload" href="/eye-logo.svg" as="image" type="image/svg+xml" />
    
    <!-- Inline critical CSS for faster FCP -->
    <style>
      *,::before,::after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}
      html{line-height:1.5;-webkit-text-size-adjust:100%;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial}
      body{margin:0;line-height:inherit}
      .bg-pastel-green{background-color:#B8E6C9}
      .bg-pastel-pink{background-color:#FFD7E0}
      .shadow-md{box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1)}
      .container{width:100%;margin-left:auto;margin-right:auto;padding-left:1rem;padding-right:1rem;max-width:1280px}
      .min-h-screen{min-height:100vh}
      .flex{display:flex}
      .flex-col{flex-direction:column}
      .flex-grow{flex-grow:1}
      .items-center{align-items:center}
      .justify-between{justify-content:space-between}
      .gap-3{gap:.75rem}
      .text-3xl{font-size:1.875rem;line-height:2.25rem}
      .font-bold{font-weight:700}
      .text-gray-800{color:#1f2937}
      .py-6{padding-top:1.5rem;padding-bottom:1.5rem}
      .px-4{padding-left:1rem;padding-right:1rem}
      .hidden{display:none}
      @media (min-width:768px){.md\:flex{display:flex}.md\:hidden{display:none}}
    </style>
  </head>
  <body>
    <div class="min-h-screen flex flex-col">
      <!-- Header -->
      <header class="bg-pastel-green shadow-md">
        <div class="container mx-auto px-4 py-6">
          <div class="flex items-center justify-between">
            <a href="/" class="flex items-center gap-3 text-3xl font-bold text-gray-800 hover:text-gray-600 transition" aria-label="Exotic Pet Atlas Home">
              <img src="/eye-logo.svg" alt="" class="w-12 h-12" aria-hidden="true" />
              <span>Exotic Pet Atlas</span>
            </a>
            <nav class="hidden md:flex space-x-6" aria-label="Main navigation">
              <a href="/" class="text-gray-800 hover:text-gray-900 font-medium transition">Home</a>
              <a href="/pets/" class="text-gray-800 hover:text-gray-900 font-medium transition">Pets</a>
              <a href="/laws/" class="text-gray-800 hover:text-gray-900 font-medium transition">Laws</a>
              <a href="/vets/" class="text-gray-800 hover:text-gray-900 font-medium transition">Vets</a>
              <a href="/breeders/" class="text-gray-800 hover:text-gray-900 font-medium transition">Breeders</a>
              <a href="/setups/" class="text-gray-800 hover:text-gray-900 font-medium transition">Setups</a>
              <a href="/contact/" class="text-gray-800 hover:text-gray-900 font-medium transition">Contact</a>
            </nav>
            <!-- Mobile Menu Button -->
            <button id="mobile-menu-btn" class="md:hidden text-gray-800 hover:text-gray-900" aria-label="Open mobile menu" aria-expanded="false">
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
              </svg>
            </button>
          </div>
          <!-- Mobile Menu -->
          <nav id="mobile-menu" class="hidden md:hidden mt-4 space-y-2" aria-label="Mobile navigation">
            <a href="/" class="block text-gray-800 hover:text-gray-900 font-medium py-2">Home</a>
            <a href="/pets/" class="block text-gray-800 hover:text-gray-900 font-medium py-2">Pets</a>
            <a href="/laws/" class="block text-gray-800 hover:text-gray-900 font-medium py-2">Laws</a>
            <a href="/vets/" class="block text-gray-800 hover:text-gray-900 font-medium py-2">Vets</a>
            <a href="/breeders/" class="block text-gray-800 hover:text-gray-900 font-medium py-2">Breeders</a>
            <a href="/setups/" class="block text-gray-800 hover:text-gray-900 font-medium py-2">Setups</a>
            <a href="/contact/" class="block text-gray-800 hover:text-gray-900 font-medium py-2">Contact</a>
          </nav>
        </div>
      </header>

      <!-- Main Content -->
      <main class="flex-grow container mx-auto px-4 py-8">
        <slot />
      </main>

      <!-- Footer -->
      <footer class="bg-pastel-pink mt-12">
        <div class="container mx-auto px-4 py-8">
          <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
            <div>
              <h3 class="text-xl font-bold text-gray-800 mb-4">Exotic Pet Atlas</h3>
              <p class="text-gray-700 text-sm">Your comprehensive guide to exotic pet ownership, care, and regulations.</p>
            </div>
            <div>
              <h3 class="text-lg font-bold text-gray-800 mb-4">Quick Links</h3>
              <ul class="space-y-2 text-sm">
                <li><a href="/pets/" class="text-gray-700 hover:text-gray-900 transition">Browse Pets</a></li>
                <li><a href="/laws/" class="text-gray-700 hover:text-gray-900 transition">State Laws</a></li>
                <li><a href="/vets/" class="text-gray-700 hover:text-gray-900 transition">Find Vets</a></li>
                <li><a href="/breeders/" class="text-gray-700 hover:text-gray-900 transition">Find Breeders</a></li>
                <li><a href="/setups/" class="text-gray-700 hover:text-gray-900 transition">Care Setups</a></li>
              </ul>
            </div>
            <div>
              <h3 class="text-lg font-bold text-gray-800 mb-4">About</h3>
              <ul class="space-y-2 text-sm">
                <li><a href="/about/" class="text-gray-700 hover:text-gray-900 transition">About Us</a></li>
                <li><a href="/editorial-policy/" class="text-gray-700 hover:text-gray-900 transition">Editorial Policy</a></li>
                <li><a href="/sources/" class="text-gray-700 hover:text-gray-900 transition">Sources</a></li>
                <li><a href="/contact/" class="text-gray-700 hover:text-gray-900 transition">Contact</a></li>
              </ul>
            </div>
            <div>
              <h3 class="text-lg font-bold text-gray-800 mb-4">Legal</h3>
              <ul class="space-y-2 text-sm">
                <li><a href="/disclaimer/" class="text-gray-700 hover:text-gray-900 transition">Disclaimer</a></li>
                <li><a href="/privacy-policy/" class="text-gray-700 hover:text-gray-900 transition">Privacy Policy</a></li>
                <li><a href="/terms/" class="text-gray-700 hover:text-gray-900 transition">Terms of Use</a></li>
              </ul>
            </div>
          </div>
          <div class="border-t border-gray-300 mt-8 pt-6 text-center text-gray-600 text-sm">
            <p class="mb-2">&copy; {new Date().getFullYear()} Exotic Pet Atlas. All rights reserved.</p>
            <p class="text-xs text-gray-500">
              This site provides educational information only. Always consult licensed veterinarians and local authorities for medical/legal advice.
            </p>
          </div>
        </div>
      </footer>
    </div>

    <script>
      // Mobile menu toggle with accessibility
      const menuBtn = document.getElementById('mobile-menu-btn');
      const mobileMenu = document.getElementById('mobile-menu');
      
      menuBtn?.addEventListener('click', () => {
        const isExpanded = mobileMenu?.classList.toggle('hidden');
        menuBtn.setAttribute('aria-expanded', isExpanded ? 'false' : 'true');
      });
